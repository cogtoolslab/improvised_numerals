<!-- set size = 6  -->
<!-- to manually change to set size 4, change images to 4chairs.png (and adjust size to 400, 100), "six objects" to "four objects", and 48 trials to 40 -->
<!-- and second to last question in comprehension check  -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <!-- <link rel="icon" href="../favicon.ico"> -->

    <title>Experiment</title>

    <!-- Bootstrap core CSS -->
    <link href="../../lib/css/bootstrap.min.css" rel="stylesheet">



    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body role="document">

    <div class="container theme-showcase" role="main">

      </br>
      <div class="progress">
        <div class="progress-bar" role="progressbar" aria-valuenow="5" aria-valuemin="0" aria-valuemax="100" style="width: 5%;"><span class="sr-only">5% Complete</span></div>
      </div>

      <div class="page-header">
        <h1>Instructions</h1>
      </div>

      <div class="well" style="width:800px; margin: 0 auto">

<h2><center>Number Game</center>  </h2>

	<p>

	  You will play a communication game with another player. Each game has 32 trials. On each trial both of you will see four groups of dots that come in different numbers, like this:
</p>
    <p>
      <center><img src="images/dot_arrays.png" alt="Example Objects" style="width:300px;height:100px"></center>
    </p>
<p>

  One of you will act as the "Sender" and the other will be the "Receiver". Every trial will have four steps:

</p>

  <p>
    <b>STEP ONE: </b> Both players will see the same groups of dots. A “target” group will be highlighted to the Sender in blue, as in the picture above.
    Each player will see the pictures in a <b>different order</b>. This means that if the Sender sees images in the order above, the Receiver will see them in a scrambled order, like shown below:
    <p>
      <center><img src="images/dot_arrays2.png" alt="Example Receiver Objects" style="width:300px;height:100px"></center>
    </p>
</p>
  <p>
    <b>STEP TWO: </b>  The Sender will use a few symbol buttons to help the Receiver pick out the target as quickly as possible. The Sender will use these buttons to create a message, and then click “submit”:
    <p>
      <center><img src="images/symbol_keyboard.png" alt="Symbol Keyboard" style="width:330px;height:100px"></center>
    </p>
</p>

  <p>
  <b>STEP THREE: </b> Then the Receiver will see the message. The Receiver will then click on whichever group of dots they think it matches, and click “confirm” once they are sure. 
  <b>Once the "confirm" button is clicked, the response is submitted and the Receiver cannot change their selection.
  </b> 
</p>
<p>
  <b>STEP FOUR: </b> Both players will be given feedback; the Sender will see what the Receiver clicked (highlighted in yellow), and the Receiver will see the true target (also highlighted in yellow). Then you will both automatically move on to the next trial.
</p>

  <p>
    For each correct guess the Receiver makes, both of you will receive
    <b>an accuracy bonus of $0.03</b> per correct guess.
    Incorrect guesses do not receive any bonus, so try your best!
    

<p> A few final notes: First, since you are playing with another
  player, you may see this screen before the game begins:
  <p>
    <center><img src="images/waitForViewer.png" alt="initial board" style="width:700px;height:200px"></center>
  </p>
  Just hold tight. Another player should join the game within the next
  few minutes. If you're in the waiting room for more than 5 minutes without
  another player joining, please return the HIT.
  Otherwise, once a Receiver joins, you will be notified and need to
  click a button to start the game.
</p>


<p>
  Finally, please DO NOT refresh the page at any point once you start
  the game (including the waiting page). If you refresh, you will not
  be able to rejoin the game you were in and you may not be able to
  submit the HIT. <br> Thank you!
</p>

<h4>

    In sum:
    <br><br>
    As a Sender, your priority is to send useful information that will help
    the Receiver always select the correct image.
    <br><br>
    As a Receiver, your job is to be really sure when you are making your decision so
    you can always <b>select the correct image</b>.
    <br><br>
    Please fill out this short quiz below before getting started. Good luck and have fun!
</h4>



  </div>
  <div class="page-header">
    <h3>Comprehension Quiz</h3>
  </div>

 <div class="well" style="width:800px; margin: 0 auto">

  </br>
  The Sender can click on an image to end the trial.
    </br>
    <input type="radio" name="dgoal" value="yes"> False
    </br>
    <input type="radio" name="dgoal" value="no"> True
    </br>


  </br>
  The Sender and Receiver see the three groups of dots in a shuffled order.
      </br>
      <input type="radio" name="mgoal" value="no"> False
      </br>
      <input type="radio" name="mgoal" value="yes"> True
      </br>


  </br>
  The target is the image which has the blue box around it (only seen by the Sender).
      </br>
      <input type="radio" name="round" value="yes"> True
      </br>
      <input type="radio" name="round" value="no"> False
      </br>

  </br>
  Only the Sender can use the symbol keyboard to send information.
      </br>
      <input type="radio" name="message" value="no"> False
      </br>
      <input type="radio" name="message" value="yes"> True
      </br>

  </br>
  There are a total of 200 trials.
      </br>
      <input type="radio" name="comp" value="no"> True
      </br>
      <input type="radio" name="comp" value="yes"> False
      </br>

  </br>
 

    <input id="quiz_submit" type="submit" value="Submit">
      </br>
      </br>
  <div class="error" style="display:none"> Ooops! Looks like you made a mistake. You have one more try. </div>
    </div> <!-- /container -->
      </div>
    <script type="text/javascript">
      $('html,body').scrollTop(0);
      var urlParams;
	var match,
	      pl     = /\+/g,  // Regex for replacing addition symbol with a space
	      search = /([^&=]+)=?([^&]*)/g,
	      decode = function (s) { return decodeURIComponent(s.replace(pl, " ")); },
	      query  = location.search.substring(1);

      urlParams = {};
      while (match = search.exec(query))
      urlParams[decode(match[1])] = decode(match[2]);

      // console.log(urlParams)

      var counter = 0;
      document.getElementById("quiz_submit").onclick = function () {
        var ans1 = $('input[name="dgoal"]:checked').val();
        var ans2 = $('input[name="mgoal"]:checked').val();
        var ans3 = $('input[name="round"]:checked').val();
        var ans4 = $('input[name="message"]:checked').val();
        var ans5 = $('input[name="comp"]:checked').val();

        if(ans1 == "yes" && ans2 == "yes" && ans3 == "yes" &&
           ans4 == "yes" && ans5 == "yes") {
           var workerId = urlParams.workerId;
           var assignmentId = urlParams.assignmentId;
           var hitId = urlParams.hitId;
           var turkSubmitTo = urlParams.turkSubmitTo;

           var PROLIFIC_PID = urlParams.PROLIFIC_PID;
           var SESSION_ID = urlParams.SESSION_ID;
           var STUDY_ID = urlParams.STUDY_ID;

           location.replace("./pass.html?PROLIFIC_PID=" + PROLIFIC_PID
                            + "&SESSION_ID=" + SESSION_ID
                            + "&STUDY_ID=" + STUDY_ID); // + "&turkSubmitTo=" + turkSubmitTo);
        } else if(counter == 2) {
          location.replace("./fail.html");
        } else {
          $('.error').show()
          counter += 1;
        }
      };
    </script>

    <script src="./validate-form.js"></script>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

    <!-- <script src="../lib/js/bootstrap.min.js"></script> -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
  </body>
</html>
